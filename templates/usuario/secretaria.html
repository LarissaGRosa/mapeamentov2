{% load static %}
{% load crispy_forms_tags %}
<!doctype html>
<html lang="pt-br">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'Curso/node_modules/bootstrap/compiler/bootstrap.css' %}"> 
    
    <link rel="stylesheet" href="{% static 'style.css' %}">
    
    <link rel="stylesheet" href="{% static 'Curso/node_modules/font-awesome/css/font-awesome.css' %}"> 
      
    
    <script src="https://kit.fontawesome.com/0dfab7069d.js" crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
      

    <title>Secretaria</title>
  </head>
  <body>
      
      <div class="container-fluid mybg" style="min-height:1000px">
          
        {% include 'nav-bar.html' %}
          

                <div class="row-fluid">

                    <div class="col-12">

                      <ul class="nav nav-pills justify-content-center mb-3" id="pills-nav" role="tablist">

                        <li class="nav-item ">                            
                          <a class="nav-link active btn btn-success mx-2 my-2" id="nav-pills-01" data-toggle="pill" href=#nav-item-01>Novo Professor</a>
                        </li>

                        <li class="nav-item">                            
                          <a class="nav-link btn btn-success mx-2 my-2" id="nav-pills-02" data-toggle="pill" href=#nav-item-02>Nova Escola</a>
                        </li>

                        <li class="nav-item">                            
                          <a class="nav-link btn btn-success mx-2 my-2" id="nav-pills-03" data-toggle="pill" href=#nav-item-03>Tabela de Dados</a>
                        </li>

                      </ul>

                      <div class="tab-content" id="nav-pills-content">

                        <div class="tab-pane fade show active text-center" id="nav-item-01" role="tabpanel">

                          <div class="row justify-content-center">

                            <div class="col-sm-6">
                                
                                <h1 class="text-black-50">Novo Professor</h1>
                                
                              <form method="POST" id="post-form" data-form-title="Novo professor">    
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="nome" required="" placeholder="Nome*" data-form-field="nome">
                                    </div>
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="ensinomedio" required="" placeholder="Ensino médio*" data-form-field="ensinomedio">
                                    </div>
                                    <div class="form-group">
                                        <input type="tel" class="form-control" id="instgrad" placeholder="Instituição de graduação" data-form-field="instgrad">
                                    </div>
                                    <div class="form-group">
                                        <input type="tel" class="form-control" id="periodograd" placeholder="Período de graduação (ex:2010-2020)" data-form-field="periodograd">
                                    </div>


                                    <div class="form-group">
                                        <input type="tel" class="form-control" id="iniciomagis" placeholder="Início no magistério (ex: 2010)" data-form-field="iniciomagis">
                                    </div>

                                    <div class="form-group">
                                        <textarea class="form-control" id="cursograd" rows="7" placeholder="Curso de graduação" data-form-field="cursograd"></textarea>
                                    </div>
                                    <div class="form-group text-black-50">
                                    <label for="select">Estou cadastrando uma?</label>
                                    <select multiple class="form-control" id="select">
                                      <option value="1">Graduação</option>
                                      <option value="2">Pós-graduação</option>

                                    </select>
                                  </div>

                                    <div class="text-left"><button type="submit" class="btn btn-success mb-5">Enviar</button></div>
                            </form>

                            </div>

                          </div>

                        </div>

                        <div class="tab-pane fade  text-center" id="nav-item-02" role="tabpanel">
                            
                            <div class="row justify-content-center">
                                <div class="col-sm-6">
                                    
                                    <h1 class="text-black-50">Nova Escola</h1>

                                      <form method="POST" id="post-form1" data-form-title="Nova Escola">
                                          {% csrf_token %}

                                        <div class="form-group">
                                            <input type="text" class="form-control" id="nome1" required="" placeholder="Nome da escola*" data-form-field="nome">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="regiao" required="" placeholder="Região*" data-form-field="regiao">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="uf" placeholder="Estado" data-form-field="uf">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="municipio" placeholder="Município" data-form-field="municipio">
                                        </div>


                                        <div class="form-group">
                                            <input type="text" class="form-control" id="cod_municipio" placeholder="Código do município" data-form-field="cod_municipio">
                                        </div>

                                        <div class="form-group">
                                            <input type="text" class="form-control" id="dependencia"  placeholder="Dependência administrativa" data-form-field="dependencia">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="nomedeusuario" rows="7" placeholder="Nome de usuário, para fins de login" data-form-field="nomedeusuario">
                                        </div>
                                        <div class="form-group">
                                            <input type="email" class="form-control" id="email" placeholder="E-mail, para fins de login" data-form-field="email">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="senha"  placeholder="Senha, para fins de login" data-form-field="senha">
                                        </div>



                                        <div class="text-left"><button type="submit" class="btn btn-success mb-5">Enviar</button></div>
                                    </form>
                                </div>
                            </div>

                        </div>

                        <div class="tab-pane fade text-center" id="nav-item-03" role="tabpanel">

                           <div class="row justify-content-center">                                  

                                      <div class="container container-table">
                                          <div class="row justify-content-end">
                                              <div class="col-sm-8">

                                                  <div class="table-wrapper">

                                                      <div class="row justify-content-end mr-3">

                                                        <div class="col-sm-6 text-left">
                                                            <div class="dataTables_filter">
                                                              <label class="searchInfo mbr-fonts-style display-7 text-black-50">Pesquisar:</label>
                                                              <input class="form-control">
                                                            </div>
                                                        </div>

                                                      </div>
                                                  </div>
                                              </div>
                                          </div>

                                            <div class="container mt-3">
                                                <div class="col-sm-12">
                                                        <table class="table isSearch" cellspacing="0">
                                                        <thead>
                                                          <tr class="table-heads text-black-50">




                                                          <th class="head-item mbr-fonts-style display-7">
                                                                  NOME</th><th class="head-item mbr-fonts-style display-7">
                                                                  TEMPO NO MAGISTÉRIO</th><th class="head-item mbr-fonts-style display-7">
                                                                  ENSINO MÉDIO</th><th class="head-item mbr-fonts-style display-7">
                                                                  SECRETÁRIA</th></tr>
                                                        </thead>

                                                          <tbody class="posts">

                                                        
                                                        {% for p in professores %}

                                                            <tr>
                                                                <td class="body-item mbr-fonts-style display-7">{{ p.nome }}</td>
                                                                <td class="body-item mbr-fonts-style display-7">{{ p.inimagisterio }}</td>
                                                                <td class="body-item mbr-fonts-style display-7">{{p.ensinomedio}}</td>
                                                                <td class="body-item mbr-fonts-style display-7">
                                                                    <button type="button" class="btn-success mr-1" onclick='getprofile(this)' value='{{p.id}}' data-toggle="modal" data-target="#exampleModal">Editar</button>
                                                                    <button type="button" class="btn-success" onclick='desativar(this)' value='{{p.id}}' >Desativar</button>
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                         </tbody>          


                                                      </table>
                                                    
                                                </div>
                                            </div>

                                          </div>
                                                                     
                                 <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                  <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Editar professor</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                      </div>
                                      <div class="modal-body">
                                        <form method="POST" id="post-form3" data-form-title="Editar professor">
                                            <h3>Professor número:</h3><h6 id="idprof" ></h6>
                                                    {% csrf_token %}
                                                    <input type="hidden" value="6HWg9qVFZM40FHR/0hFIyq1WOP2oEDIBRDeMuXYK8F8hr1ZHFnf9JbLvgFDlIIzcxc3iGZiJ6rUz/UtcXMk9fnKpnu5byLkIaZ75Z1N4T2Fb2oKOyp3tyuSIn9ZF1bs7" data-form-email="true">
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="nome2" required="" placeholder="Nome*" data-form-field="nome">
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="ensinomedio2" required="" placeholder="Ensino médio*" data-form-field="ensinomedio">
                                                    </div>



                                                    <div class="form-group">
                                                        <input type="tel" class="form-control" id="iniciomagis2" placeholder="Início no magistério (ex: 2010)" data-form-field="iniciomagis">
                                                    </div>



                                                    <div class="text-xs-right"><button type="submit" class="btn btn-secondary-outline">Enviar</button></div>
                                                </form>

                                                 <table class="table isSearch" cellspacing="0">
                                            <thead>
                                              <tr class="table-heads ">




                                              <th class="head-item mbr-fonts-style display-7">
                                                      NOME</th><th class="head-item mbr-fonts-style display-7">
                                                      TEMPO NO MAGISTÉRIO</th><th class="head-item mbr-fonts-style display-7">
                                                      ENSINO MÉDIO</th><th class="head-item mbr-fonts-style display-7">
                                                      SECRETÁRIA</th></tr>
                                            </thead>

                                            <tbody class="posts1">



                                            </tbody>



                                          </table>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                               
                            
                           </div>

                            <div class="container mt-3">
                                                <div class="col-sm-12">
                                                        <table class="table isSearch" cellspacing="0">
                                                        <thead>
                                                          <tr class="table-heads text-black-50">




                                                          <th class="head-item mbr-fonts-style display-7">
                                                                  NOME</th><th class="head-item mbr-fonts-style display-7">
                                                                  DEPENDENCIA ADMINISTRATIVA</th><th class="head-item mbr-fonts-style display-7">
                                                                  MUNICÍPIO</th><th class="head-item mbr-fonts-style display-7">
                                                                  EDITAR</th></tr>
                                                        </thead>

                                                          <tbody class="posts">


                                                        {% for n in escolas %}

                                                            <tr>
                                                                <td class="body-item mbr-fonts-style display-7">{{ n.nome}}</td>
                                                                <td class="body-item mbr-fonts-style display-7">{{ n.dependencia }}</td>
                                                                <td class="body-item mbr-fonts-style display-7">{{n.municipio}}</td>
                                                                <td class="body-item mbr-fonts-style display-7">
                                                                    <button type="button" class="btn-success mr-1" onclick='getprofile_e(this)' value='{{n.id}}' data-toggle="modal" data-target="#exampleModal1">Editar</button>
                                                                    <button type="button" class="btn-success" onclick='desativar_e(this)' value='{{n.id}}' >Desativar</button>
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                         </tbody>


                                                      </table>


                                                </div>
                                            </div>
                                                 <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                  <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title">Editar Escola</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                      </div>
                                      <div class="modal-body">
                                        <form method="POST" id="post-form4" data-form-title="Editar professor">
                                            <h3>Escola número:</h3><h6 id="idesc" ></h6>
                                                    {% csrf_token %}
                                                    <input type="hidden" value="6HWg9qVFZM40FHR/0hFIyq1WOP2oEDIBRDeMuXYK8F8hr1ZHFnf9JbLvgFDlIIzcxc3iGZiJ6rUz/UtcXMk9fnKpnu5byLkIaZ75Z1N4T2Fb2oKOyp3tyuSIn9ZF1bs7" data-form-email="true">
                                                         <div class="form-group">
                                            <input type="text" class="form-control" id="nome3" required="" placeholder="Nome da escola*" data-form-field="nome">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="regiao3" required="" placeholder="Região*" data-form-field="regiao">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="uf3" placeholder="Estado" data-form-field="uf">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" id="municipio3" placeholder="Município" data-form-field="municipio">
                                        </div>


                                        <div class="form-group">
                                            <input type="text" class="form-control" id="cod_municipio3" placeholder="Código do município" data-form-field="cod_municipio">
                                        </div>

                                        <div class="form-group">
                                            <input type="text" class="form-control" id="dependencia3"  placeholder="Dependência administrativa" data-form-field="dependencia">
                                        </div>

                                                    <div class="text-xs-right"><button type="submit" class="btn btn-secondary-outline">Enviar</button></div>
                                                </form>

                                                 <table class="table isSearch" cellspacing="0">
                                            <thead>
                                              <tr class="table-heads ">




                                              <th class="head-item mbr-fonts-style display-7">
                                                      NOME</th><th class="head-item mbr-fonts-style display-7">
                                                      DEPENDENCIA ADMINISTRATIVA</th><th class="head-item mbr-fonts-style display-7">
                                                      MUNICÍPIO</th><th class="head-item mbr-fonts-style display-7">
                                                      EDIÇÃO?</th></tr>
                                            </thead>

                                            <tbody class="posts2">



                                            </tbody>



                                          </table>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                          </div>

                        </div>

                      </div>

                    </div>

                </div>
        </div>
    
      
    <section>
        <div class="container-fluid my-5">
        <div class="row justify-content-center my-3"><h1 class="text-dark">Dados</h1></div>
    
    
      <div class="row justify-content-sm-center">

        <div class="col-sm-6 col-md-4">

          <div class="card mb-5 bg-white rounded">

            <div class="card-body">

              <h4>
                                Graduação por área
                            </h4>

                                {{ response|safe }}


            </div>

          </div>

        </div>






        <div class="col-sm-6 col-md-4">

          <div class="card mb-5 bg-white rounded">

            <div class="card-body ">

              <h4>
                                Pós-graduação por área
                            </h4>
                            {{ response1|safe }}
            </div>

          </div>

        </div>

        <div class="col-sm-6 col-md-4">

          <div class="card mb-5 bg-white rounded">

            <div class="card-body ">

            <h4>
                Quantidades de professores
            </h4>      
                            {{ response2|safe}}
            </div>

          </div>

        </div>

      </div>
    </div>
    
</section>
      
      {% include 'fotters.html' %}
      
      
      
      
   
      
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{% static 'assets/web/assets/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'assets/popper/popper.min.js' %}"></script>
    <script src="{% static 'assets/bootstrap/js/bootstrap.min.js' %}"></script>
      
      <script>
    $(document).on('submit', '#post-form',function(e){

    $.ajax({
        type:'POST',
        url:'{% url "perfil:secretaria" %}',
        data:{
            nome:$('#nome').val(),
            ensinomedio:$('#ensinomedio').val(),
            instgrad:$('#instgrad').val(),
            cursograd:$('#cursograd').val(),
            periodograd:$('#periodograd').val(),
            selectedValue : $("#select :selected").val(),
            iniciomagis:$('#iniciomagis').val(),
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            action: 'post'
        },
        success:function(json){
            document.getElementById("post-form").reset();
            document.getElementById(".posts").append('<tr><td class="body-item mbr-fonts-style display-7">'+json.nome+'</td><td class="body-item mbr-fonts-style display-7">'+ json.tempo +
          '</td><td class="body-item mbr-fonts-style display-7">'+json.magis+'</td><td class="body-item mbr-fonts-style display-7">'+'<button type="button" class="btn btn-primary" onclick="get_professor(this)" value="'+ json.id +'" data-toggle="modal" data-target="#exampleModal">Editar</button>'+'</td></tr>')
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
});
</script>
      
<script>
    $(document).on('submit', '#post-form1',function(e){

    $.ajax({
        type:'POST',
        url:'{% url "perfil:addescola" %}',
        data:{
            nome:$('#nome1').val(),
            regiao:$('#regiao').val(),
            municipio:$('#municipio').val(),
            cod_municipio:$('#cod_municipio').val(),
            uf:$('#uf').val(),
            dependencia:$('#dependencia').val(),
            nomedeusuario : $('#nomedeusuario').val(),
            email:$('#email').val(),
            senha:$('#senha').val(),
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            action: 'post'
        },
        success:function(json){
            document.getElementById("post-form").reset();
            $(".posts").append('<tr><td class="body-item mbr-fonts-style display-7">'+json.nome+'</td><td class="body-item mbr-fonts-style display-7">'+ json.email +
          '</td><td class="body-item mbr-fonts-style display-7">'+json.municipio+'</td><td class="body-item mbr-fonts-style display-7">'+ json.dependencia +'</td></tr>')
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
});
</script>
      <script>
    $(document).on('submit', '#post-form4',function(e){

    $.ajax({
        type:'POST',
        url:'{% url "perfil:editescolas" %}',
        data:{
            id: document.getElementById('idesc').innerHTML,
            nome:$('#nome3').val(),
            regiao:$('#regiao3').val(),
            municipio:$('#municipio3').val(),
            cod_municipio:$('#cod_municipio3').val(),
            uf:$('#uf3').val(),
            dependencia:$('#dependencia3').val(),
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            action: 'post'
        },
        success:function(json){
            document.getElementById("post-form3").reset();
            $(".posts2").append('<tr><td class="body-item mbr-fonts-style display-7">'+json.nome+'</td><td class="body-item mbr-fonts-style display-7">'+ json.email +
          '</td><td class="body-item mbr-fonts-style display-7">'+json.municipio+'</td><td class="body-item mbr-fonts-style display-7">'+ json.dependencia +'</td></tr>')
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
});
</script>
      
      <script>
      $(document).on('submit', '#post-form3',function(e){

        $.ajax({
            type:'POST',
            url:'{% url "perfil:editarprofessor" %}',
            data:{

                nome:$('#nome2').val(),
                ensinomedio:$('#ensinomedio2').val(),
                iniciomagis:$('#iniciomagis2').val(),
                id: document.getElementById('idprof').innerHTML,
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
        success:function(json){
            document.getElementById("post-form3").reset();
            alert('Sucesso!!');
           },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
   });
   </script>
      <script src="{% static 'jquery/funcao.js' %}"></script>
      
    
    
  </body>
</html>